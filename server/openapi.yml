openapi: 3.1.0
info:
  title: Photo App API
  version: 1.0.0
paths:
  /health:
    get:
      summary: Health check
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /api/v1/photos:
    get:
      summary: List photos with pagination
      parameters:
        - name: state
          in: query
          description: Filter by photo state (working, inprogress, finished)
          required: false
          schema:
            type: string
            enum: [working, inprogress, finished]
        - name: limit
          in: query
          description: Number of photos to return per page (1-200, default 50)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 200
            default: 50
        - name: cursor
          in: query
          description: Opaque pagination cursor from previous response
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Paginated list of photos
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - userId
                  - photos
                properties:
                  success:
                    type: boolean
                  userId:
                    type: string
                    format: uuid
                  photos:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        filename:
                          type: string
                        state:
                          type: string
                          enum: [working, inprogress, finished, error]
                        hash:
                          type: string
                        file_size:
                          type: integer
                        caption:
                          type: string
                        description:
                          type: string
                        keywords:
                          type: string
                        classification:
                          type: string
                        metadata:
                          type: object
                        url:
                          type: string
                        thumbnail:
                          type: string
                        created_at:
                          type: string
                          format: date-time
                  nextCursor:
                    type: string
                    nullable: true
                    description: Cursor for next page, null if no more results
        '400':
          description: Invalid query parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                  reqId:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                  reqId:
                    type: string
  /api/v1/photos/dependencies:
    get:
      summary: Get AI dependency status
      responses:
        '200':
          description: Dependency readiness information
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  dependencies:
                    type: object
                    properties:
                      aiQueue:
                        type: boolean
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '500':
          description: Dependency check failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
