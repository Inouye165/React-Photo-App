# Photo App Server Configuration
# Copy this file to .env and fill in your actual values
# DO NOT COMMIT .env FILE TO GIT

# --- Environment ---
NODE_ENV=development
ALLOW_DEV_DEBUG=false  # Must be false in production

# --- Server ---
PORT=3001

# --- Authentication / JWT ---
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h

# --- Security ---
ENABLE_HTTPS=false
FORCE_HTTPS=false

# --- Rate Limiting ---
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5
UPLOAD_RATE_LIMIT_MAX=20

# --- Database Configuration ---
# SQLite (legacy/local dev)
DB_PATH=photos.db

# Supabase PostgreSQL URLs
# Use pooler URL for better reliability after restart
SUPABASE_DB_URL=postgresql://postgres.<project-ref>:<password>@<region>.pooler.supabase.com:5432/postgres?sslmode=require
SUPABASE_DB_URL_MIGRATIONS=postgresql://postgres.<project-ref>:<password>@<region>.pooler.supabase.com:5432/postgres?sslmode=require

# --- Supabase Storage ---
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your_public_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
SUPABASE_STORAGE_ACCESS_KEY_ID=your_storage_access_key_id
SUPABASE_STORAGE_SECRET_KEY=your_storage_secret_key

# --- AI Configuration ---
OPENAI_API_KEY=sk-your_openai_api_key
USE_LANGCHAIN=true
NOMINATIM_USER_AGENT=React-Photo-App/1.0

# --- Image Caching ---
# Controls browser cache duration for /display/:state/:filename responses (in seconds)
IMAGE_CACHE_MAX_AGE=86400

# LangSmith / LangChain tracing (optional)
LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=your_langsmith_api_key
LANGCHAIN_PROJECT="photo app"

# --- Google Custom Search (optional) ---
GOOGLE_API_KEY=your_google_api_key
GOOGLE_CSE_ID=your_google_cse_id

# --- File Upload Configuration ---
MAX_FILE_SIZE=50mb
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,heic,heif

# --- CORS Configuration ---
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
CORS_CREDENTIALS=true

# --- Production Environment Variables ---
# Set these in your cloud deployment environment
# CLIENT_ORIGIN=https://www.your-photo-app.com
# API_URL=https://api.your-photo-app.com

# --- Migration/Debug Options ---
# Emergency bypass for local dev only (do not use in CI/Prod)
# SKIP_VERIFY_MIGRATIONS=true
